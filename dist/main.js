(()=>{"use strict";const e=e=>{const t=[];return{title:e,todos:t,addTodo:e=>{t.push(e)},getTitle:()=>e}},t=(e,t)=>{let o=!1;return{title:e,description:t,completed:o,getTitle:()=>e,getDescription:()=>t,setCompletion:()=>{o=!0},getCompletion:()=>o}};function o(e){const o=document.createElement("button"),n=document.getElementById("project-div"),c=document.getElementById("navbar");o.textContent=e.title,o.addEventListener("click",(o=>{n.innerHTML="",n.append(function(e){const t=document.createElement("div"),o=document.createElement("h2"),n=document.createElement("button");return n.textContent="Add Todo?",n.addEventListener("click",(()=>{const e=document.getElementById("todo-form");e.classList.remove("hidden"),e.classList.toggle("bounce-in-right")})),o.textContent=e.title,t.append(o,n),t}(e),function(){document.createElement("br");const e=document.createElement("form");e.id="todo-form",e.classList.add("hidden");const t=document.createElement("label");t.textContent="Todo Title";const o=document.createElement("input");o.setAttribute("type","text"),o.id="todo-title-field";const n=document.createElement("label");n.textContent="Todo Description";const c=document.createElement("input");c.setAttribute("type","text"),c.id="todo-description-field";const l=document.createElement("input");return l.setAttribute("type","submit"),l.value="Add Todo",l.id="add-todo-button",l.addEventListener("click",(()=>{const e=document.getElementById("todo-form");e.classList.add("hidden"),e.classList.remove("bounce-in-right")})),e.append(t,document.createElement("br"),o,document.createElement("br"),n,document.createElement("br"),c,document.createElement("br"),l),e}()),function(e){document.getElementById("todo-form").addEventListener("submit",(o=>{o.preventDefault();let n=JSON.parse(localStorage.getItem(e.title));console.log(n);let c=document.getElementById("todo-title-field"),l=document.getElementById("todo-description-field");console.log(l.value);let d=t(c.value,l.value);console.log(d);let i=JSON.stringify(d);console.log(i),e.addTodo(d),n.todos.push(i),localStorage.setItem(n.title,JSON.stringify(n))}))}(e),e.todos.forEach((o=>n.append(function(e,o){const n=document.createElement("div");n.classList.add("todo-container");const c=document.createElement("h3"),l=document.createElement("p"),d=document.createElement("input"),i=t(e.title,e.getDescription(),e.completed);return d.classList.add("todo-checkbox"),d.type="checkbox",console.log(i.completed),console.log(e.completed),d.checked=i.getCompletion(),d.addEventListener("click",(()=>{let e=localStorage.getItem(o.title),t=JSON.parse(e);console.log(t.todos),t.todos.forEach((e=>{let o=JSON.parse(e);if(i.title==o.title)if(0==o.completed){let n=t.todos.indexOf(e);console.log(t.todos[n]),o.completed=!0,i.completed=!0;let c=JSON.stringify(o);t.todos[n]=c}else{let n=t.todos.indexOf(e);o.completed=!1,i.completed=!1;let c=JSON.stringify(o);t.todos[n]=c}}));let n=JSON.stringify(t);localStorage.setItem(o.title,n)})),c.textContent=i.getTitle(),l.textContent=i.getDescription(),n.append(c,l,d),n}(o,e))))})),c.append(o)}(()=>{Object.keys(localStorage).forEach((n=>{let c=JSON.parse(localStorage.getItem(n)),l=c.todos,d=e(c.title);l.forEach((e=>{let o=JSON.parse(e),n=t(o.title,o.description);d.todos.push(n)})),o(d)})),function(){const e=document.createElement("form");e.id="project-form";const t=document.createElement("label");t.textContent="Project Title";const o=document.createElement("input");o.setAttribute("type","text"),o.id="project-title-field";const n=document.createElement("input");n.setAttribute("type","submit"),n.textContent="Add Project",n.id="add-project-button",e.append(t,o,n),document.body.append(e)}(),function(){const t=document.getElementById("project-form"),n=Object.keys(localStorage);t.addEventListener("submit",(t=>{t.preventDefault(),document.getElementById("navbar");let c=document.getElementById("project-title-field"),l=e(c.value);n.includes(c.value)?alert(`Project title "${c.value}" already exists. Please choose a different title`):(localStorage.setItem(l.title,JSON.stringify(l)),o(l))}))}();const n=JSON.parse(localStorage.getItem("test"));console.log(n.todos)})()})();