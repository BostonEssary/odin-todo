(()=>{"use strict";const e=e=>{const t=[];return{title:e,todos:t,addTodo:e=>{t.push(e)},getTitle:()=>e}},t=(e,t)=>{let o=!1;return{title:e,description:t,completed:o,getTitle:()=>e,getDescription:()=>t,setCompletion:()=>{o=!0},getCompletion:()=>o}};function o(e){const o=document.createElement("button"),n=document.getElementById("project-div"),l=document.getElementById("navbar");o.textContent=e.title,o.addEventListener("click",(o=>{n.innerHTML="",n.append(function(e){const t=document.createElement("div"),o=document.createElement("h2"),n=document.createElement("button");return n.textContent="Add Todo?",n.addEventListener("click",(()=>{const e=document.getElementById("todo-form");e.classList.remove("hidden"),e.classList.toggle("bounce-in-right")})),o.textContent=e.title,t.append(o,n),t}(e),function(){document.createElement("br");const e=document.createElement("form");e.id="todo-form",e.classList.add("hidden");const t=document.createElement("label");t.textContent="Todo Title";const o=document.createElement("input");o.setAttribute("type","text"),o.id="todo-title-field";const n=document.createElement("label");n.textContent="Todo Description";const l=document.createElement("input");l.setAttribute("type","text"),l.id="todo-description-field";const c=document.createElement("input");return c.setAttribute("type","submit"),c.value="Add Todo",c.id="add-todo-button",c.addEventListener("click",(()=>{const e=document.getElementById("todo-form");e.classList.add("hidden"),e.classList.remove("bounce-in-right")})),e.append(t,document.createElement("br"),o,document.createElement("br"),n,document.createElement("br"),l,document.createElement("br"),c),e}()),function(e){document.getElementById("todo-form").addEventListener("submit",(o=>{o.preventDefault();let n=JSON.parse(localStorage.getItem(e.title));console.log(n);let l=document.getElementById("todo-title-field"),c=document.getElementById("todo-description-field");console.log(c.value);let d=t(l.value,c.value);console.log(d);let i=JSON.stringify(d);console.log(i),e.addTodo(d),n.todos.push(i),localStorage.setItem(n.title,JSON.stringify(n))}))}(e),e.todos.forEach((o=>n.append(function(e,o){const n=document.createElement("div");console.log(e),n.classList.add("todo-container");const l=document.createElement("h3"),c=document.createElement("p"),d=document.createElement("input"),i=t(e.title,e.getDescription());return i.completed=e.completed,d.classList.add("todo-checkbox"),d.type="checkbox",console.log(i.completed),console.log(e.completed),console.log(i.getCompletion()),d.checked=i.completed,d.addEventListener("click",(()=>{let e=localStorage.getItem(o.title),t=JSON.parse(e);console.log(t),t.todos.forEach((e=>{let o=JSON.parse(e);if(i.title==o.title)if(0==o.completed){let n=t.todos.indexOf(e);o.completed=!0,i.completed=!0;let l=JSON.stringify(o);t.todos[n]=l}else{let n=t.todos.indexOf(e);o.completed=!1,i.completed=!1;let l=JSON.stringify(o);console.log(l),t.todos[n]=l}}));let n=JSON.stringify(t);localStorage.setItem(o.title,n),console.log(i.completed)})),l.textContent=i.getTitle(),c.textContent=i.getDescription(),n.append(l,c,d),n}(o,e))))})),l.append(o)}(()=>{Object.keys(localStorage).forEach((n=>{let l=JSON.parse(localStorage.getItem(n)),c=l.todos,d=e(l.title);c.forEach((e=>{let o=JSON.parse(e),n=t(o.title,o.description);n.completed=o.completed,d.todos.push(n)})),o(d)})),function(){const e=document.createElement("form");e.id="project-form";const t=document.createElement("label");t.textContent="Project Title";const o=document.createElement("input");o.setAttribute("type","text"),o.id="project-title-field";const n=document.createElement("input");n.setAttribute("type","submit"),n.textContent="Add Project",n.id="add-project-button",e.append(t,o,n),document.body.append(e)}(),function(){const t=document.getElementById("project-form"),n=Object.keys(localStorage);t.addEventListener("submit",(t=>{t.preventDefault(),document.getElementById("navbar");let l=document.getElementById("project-title-field"),c=e(l.value);n.includes(l.value)?alert(`Project title "${l.value}" already exists. Please choose a different title`):(localStorage.setItem(c.title,JSON.stringify(c)),o(c))}))}();const n=JSON.parse(localStorage.getItem("test"));console.log(n.todos)})()})();