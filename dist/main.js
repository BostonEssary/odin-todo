(()=>{"use strict";const e=e=>{const t=[];return{title:e,todos:t,addTodo:e=>{t.push(e)},getTitle:()=>e}},t=(e,t)=>{let o=!1;return{title:e,description:t,completed:o,getTitle:()=>e,getDescription:()=>t,setCompletion:()=>{o=!0},getCompletion:()=>o}};function o(e){const t=document.createElement("div");t.classList.add("field");const o=document.createElement("label");o.textContent="Title";const n=document.createElement("input");return n.setAttribute("type","text"),n.id=e,n.required=!0,t.append(o,document.createElement("br"),n),t}function n(e){const t=document.createElement("form");return t.id=e,t.classList.add("hidden"),t}function c(e,t){const o=document.createElement("input");return o.setAttribute("type","submit"),o.value=e,o.id=t,o}function l(e){const l=document.createElement("button"),i=document.querySelector(".nav-content");console.log("test"),l.textContent=e.title,l.addEventListener("click",(function(){!function(e){const l=document.getElementById("project-div"),i=document.querySelector(".navbar"),s=document.querySelectorAll(".nav-content");l.innerHTML="",l.append(function(e){const t=document.createElement("div"),o=document.createElement("h2"),n=document.createElement("button");return n.textContent="Add Todo?",n.addEventListener("click",(()=>{const e=document.getElementById("todo-form");e.reset(),e.classList.toggle("hidden"),e.classList.toggle("bounce-in-right"),console.log("test")})),o.textContent=e.title,t.append(o,n),t}(e),function(){const e=n("todo-form"),t=o("todo-title-field"),l=document.createElement("label");l.textContent="Todo Description";const d=document.createElement("button");d.textContent="Cancel";const i=document.createElement("textarea");i.id="todo-description-field";const s=c("Add Todo","add-todo-button");return s.addEventListener("click",(()=>{const e=document.getElementById("todo-form");e.classList.add("hidden"),e.classList.remove("bounce-in-right")})),d.addEventListener("click",(e=>{e.preventDefault();const t=document.getElementById("todo-form");t.classList.toggle("hidden"),t.classList.toggle("bounce-in-right")})),e.append(t,document.createElement("br"),l,document.createElement("br"),i,document.createElement("br"),s,d),e}()),function(e){const o=document.getElementById("todo-form"),n=document.getElementById("project-div");o.addEventListener("submit",(o=>{o.preventDefault();let c=JSON.parse(localStorage.getItem(e.title));console.log(c);let l=document.getElementById("todo-title-field"),i=document.getElementById("todo-description-field");console.log(i.value);let s=t(l.value,i.value);console.log(s);let r=JSON.stringify(s);console.log(r),e.addTodo(s),n.append(d(s,e)),c.todos.push(r),localStorage.setItem(c.title,JSON.stringify(c))}))}(e),e.todos.forEach((t=>l.append(d(t,e)))),i.classList.toggle("collapsed"),s.forEach((e=>{e.classList.toggle("hidden")}))}(e)})),l.classList.add("project-btn"),i.append(l)}function d(e,o){const n=document.createElement("div");n.classList.add("todo-container");const c=document.createElement("h3"),l=document.createElement("p"),d=document.createElement("input"),i=t(e.title,e.getDescription()),s=document.createElement("button");return s.classList.add("delete-todo-btn"),s.textContent="Delete Todo",i.completed=e.completed,d.classList.add("todo-checkbox"),d.type="checkbox",d.checked=i.completed,d.addEventListener("click",(function(){!function(e,o){const n=t(e.title,e.getDescription());let c=localStorage.getItem(o.title),l=JSON.parse(c);l.todos.forEach((e=>{let t=JSON.parse(e);if(n.title==t.title)if(0==t.completed){let o=l.todos.indexOf(e);t.completed=!0,n.completed=!0;let c=JSON.stringify(t);l.todos[o]=c}else{let o=l.todos.indexOf(e);t.completed=!1,n.completed=!1;let c=JSON.stringify(t);console.log(c),l.todos[o]=c}}));let d=JSON.stringify(l);localStorage.setItem(o.title,d)}(e,o)})),s.addEventListener("click",(function(n){!function(e,o,n){let c=localStorage.getItem(o.title);const l=t(e.title,e.getDescription());let d=JSON.parse(c);d.todos.forEach((e=>{let t=JSON.parse(e);if(l.title==t.title){let t=d.todos.indexOf(e);d.todos.splice(t,1)}}));let i=JSON.stringify(d);localStorage.setItem(o.title,i),n.parentElement.remove()}(e,o,n.target)})),c.textContent=i.getTitle(),l.textContent=i.getDescription(),n.append(c,l,d,s),n}Object.keys(localStorage).forEach((o=>{let n=JSON.parse(localStorage.getItem(o)),c=n.todos,d=e(n.title);c.forEach((e=>{let o=JSON.parse(e),n=t(o.title,o.description);n.completed=o.completed,d.todos.push(n)})),l(d)})),function(){const e=document.querySelector(".nav-header-button"),t=document.querySelector(".menu-btn"),o=document.querySelector(".navbar"),n=document.querySelectorAll(".nav-content");e.addEventListener("click",(()=>{const t=document.getElementById("project-form");t.reset(),t.classList.toggle("hidden"),t.classList.toggle("bounce-in-right"),e.classList.toggle("rotate"),console.log("test")})),t.addEventListener("click",(()=>{o.classList.toggle("collapsed"),n.forEach((e=>{e.classList.toggle("hidden")}))}))}(),function(){const e=document.getElementById("content"),t=n("project-form"),l=o("project-title-field"),d=c("Add Project","add-project-button");d.addEventListener("click",(()=>{const e=document.getElementById("project-form");e.classList.toggle("hidden"),e.classList.toggle("bounce-in-right")})),t.append(l,d),e.append(t)}(),function(){const t=document.getElementById("project-form"),o=Object.keys(localStorage);t.addEventListener("submit",(t=>{t.preventDefault();let n=document.getElementById("project-title-field"),c=e(n.value);o.includes(n.value)?alert(`Project title "${n.value}" already exists. Please choose a different title`):(localStorage.setItem(c.title,JSON.stringify(c)),l(c))}))}()})();